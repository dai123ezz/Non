local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

_G.Settings = {
    AutoFarm = false,
    FastAttack = false,
    FlyChest = false,
    AutoMirage = false,
    AutoRaid = false,
    FlySpeed = 250,
    Weapon = "Melee"
}

local ScreenGui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
ScreenGui.Name = "BananaHub_Clean"

local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0, 450, 0, 300)
Main.Position = UDim2.new(0.5, -225, 0.5, -150)
Main.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
Main.BorderSizePixel = 0
Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 10)
Instance.new("UIStroke", Main).Color = Color3.fromRGB(255, 215, 0)

local Sidebar = Instance.new("Frame", Main)
Sidebar.Size = UDim2.new(0, 120, 1, 0)
Sidebar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 10)

local Container = Instance.new("Frame", Main)
Container.Size = UDim2.new(1, -130, 1, -10)
Container.Position = UDim2.new(0, 125, 0, 5)
Container.BackgroundTransparency = 1

local Pages = {}
local function CreatePage(name)
    local p = Instance.new("ScrollingFrame", Container)
    p.Size = UDim2.new(1, 0, 1, 0)
    p.BackgroundTransparency = 1; p.Visible = false; p.ScrollBarThickness = 0
    Pages[name] = p
    return p
end

local function AddTab(name)
    local btn = Instance.new("TextButton", Sidebar)
    btn.Size = UDim2.new(0.9, 0, 0, 35)
    btn.Position = UDim2.new(0.05, 0, 0, 10 + (#Sidebar:GetChildren()-1) * 40)
    btn.Text = name; btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    btn.TextColor3 = Color3.new(1, 1, 1); Instance.new("UICorner", btn)
    btn.MouseButton1Click:Connect(function()
        for _, pg in pairs(Pages) do pg.Visible = false end
        Pages[name].Visible = true
    end)
    return CreatePage(name)
end

local TabMain = AddTab("Farm")
local TabSea = AddTab("Sea")
local TabMisc = AddTab("Misc")
TabMain.Visible = true

local function CreateToggle(text, parent, configKey)
    local frame = Instance.new("TextButton", parent)
    frame.Size = UDim2.new(0.95, 0, 0, 38)
    frame.Position = UDim2.new(0, 0, 0, (#parent:GetChildren()-1) * 42)
    frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35); frame.TextColor3 = Color3.new(1, 1, 1)
    frame.Text = text .. ": OFF"; Instance.new("UICorner", frame)
    frame.MouseButton1Click:Connect(function()
        _G.Settings[configKey] = not _G.Settings[configKey]
        frame.Text = text .. ": " .. (_G.Settings[configKey] and "ON" or "OFF")
        frame.TextColor3 = _G.Settings[configKey] and Color3.fromRGB(255, 215, 0) or Color3.new(1, 1, 1)
    end)
end

CreateToggle("Auto Farm", TabMain, "AutoFarm")
CreateToggle("Fast Attack", TabMain, "FastAttack")
CreateToggle("Fly Chest", TabMisc, "FlyChest")
CreateToggle("Mirage Finder", TabSea, "AutoMirage")

task.spawn(function()
    while task.wait() do
        if _G.Settings.AutoFarm or _G.Settings.FastAttack then
            pcall(function()
                local tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
                if tool then
                    game:GetService("VirtualUser"):CaptureController()
                    game:GetService("VirtualUser"):Button1Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
                end
            end)
        end
    end
end)

local OpenBtn = Instance.new("TextButton", ScreenGui)
OpenBtn.Size = UDim2.new(0, 50, 0, 50); OpenBtn.Position = UDim2.new(0, 10, 0.4, 0)
OpenBtn.Text = "üçå"; OpenBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Instance.new("UICorner", OpenBtn).CornerRadius = UDim.new(1, 0)
OpenBtn.MouseButton1Click:Connect(function() Main.Visible = not Main.Visible end)
